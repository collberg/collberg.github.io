
<!DOCTYPE html>
<html  >
<head>
  
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
  <link rel="shortcut icon" href="assets/images/tigress-white-128x101.png" type="image/x-icon">
  <meta name="description" content="Web Maker Description">
  
   <link rel="stylesheet" href="assets/web/assets/mobirise-icons/mobirise-icons.css">
  <link rel="stylesheet" href="assets/web/assets/mobirise-icons-bold/mobirise-icons-bold.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-grid.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-reboot.min.css">
  <link rel="stylesheet" href="assets/tether/tether.min.css">
  <link rel="stylesheet" href="assets/popup-overlay-plugin/style.css">
  <link rel="stylesheet" href="assets/dropdown/css/style.css">
  <link rel="stylesheet" href="assets/socicon/css/styles.css">
  <link rel="stylesheet" href="assets/theme/css/style.css">
  <link rel="preload" href="https://fonts.googleapis.com/css?family=Rubik:300,400,500,600,700,800,900,300i,400i,500i,600i,700i,800i,900i&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Rubik:300,400,500,600,700,800,900,300i,400i,500i,600i,700i,800i,900i&display=swap"></noscript>
  <link rel="preload" as="style" href="assets/mobirise/css/mbr-additional.css"><link rel="stylesheet" href="assets/mobirise/css/mbr-additional.css" type="text/css">
  <link rel="preload" as="style" href="assets/mobirise/css/tigress.css"> <link rel="stylesheet" href="assets/mobirise/css/tigress.css" type="text/css">
  <link href="assets/prism/prism.css" rel="stylesheet" />

  
 <style>
body {
  background-color: #ffffff;
  color: #000000
}
section {
  background-color: #ffffff;
  color: #000000
}
p {
   color: #000000
}
h3 {
   color: #000000
}
code {
  font-family:     "Courier New"
                    Courier
                    monospace;
  color: black;
}

</style>
  
</head>
<body>
  
  <section class="menu cid-um5eFJALJY" once="menu" id="menu1-16">

        <nav class="navbar navbar-expand beta-menu navbar-dropdown align-items-center navbar-fixed-top navbar-toggleable-sm">
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
            </div>
        </button>
        <div class="menu-logo">
            <div class="navbar-brand">
                <span class="navbar-logo">
                    <a href="index.html">
                         <img src="assets/images/screenshot-2024-08-20-at-14.25.07-copy-126x121.png" alt="" title="" style="height: 4.1rem;">
                    </a>
                </span>
                <span class="navbar-caption-wrap"><a class="navbar-caption text-white display-4" href="index.html">
                        Tigress</a></span>
            </div>
        </div>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav nav-dropdown nav-right" data-app-modern-menu="true">
   <li class="nav-item dropdown">
      <a class="nav-link link text-white dropdown-toggle display-4" href="#" data-toggle="dropdown-submenu" aria-expanded="false">Usage</a><div class="dropdown-menu">
      <a class="text-white dropdown-item text-primary display-4" href="tigress-quickstart.html">Quickstart<br></a>
      <a class="text-white dropdown-item text-primary display-4" href="tigress-mergeFiles.html">File merge<br></a>
      <a class="text-white dropdown-item text-primary display-4" href="tigress-crossCompile.html">Cross compile</a>
      <a class="text-white dropdown-item text-primary display-4" href="recipes.html">Recipes</a>
      <a class="text-white dropdown-item text-primary display-4" href="tigress-libraries.html">Libraries</a>
      <a class="text-white dropdown-item text-primary display-4" href="top-level.html">Top-Level Options</a>
      <a class="text-white dropdown-item text-primary display-4" href="plugins.html">Plugins</a>
      <a class="text-white dropdown-item text-primary display-4" href="issues.html">Issues</a>
      <a class="text-white dropdown-item text-primary display-4" href="tigress-test.html">Testing</a></div>
   </li>
   <li class="nav-item dropdown">
      <a class="nav-link link text-white dropdown-toggle display-4" href="#" data-toggle="dropdown-submenu" aria-expanded="false">Platforms</a><div class="dropdown-menu">
      <a class="text-white dropdown-item text-primary display-4" href="tigress-linux.html">Linux<br></a>
      <a class="text-white dropdown-item text-primary display-4" href="tigress-macos.html">MacOS<br></a>
      <a class="text-white dropdown-item text-primary display-4" href="tigress-windows.html">Windows<br></a>
      <a class="text-white dropdown-item text-primary display-4" href="tigress-android.html">Android<br></a>
      <a class="text-white dropdown-item text-primary display-4" href="tigress-wasm.html">WASM<br></a>
      <a class="text-white dropdown-item text-primary display-4" href="cpp.html">C++<br></a></div>
   </li>
   <li class="nav-item dropdown">
      <a class="nav-link link text-white dropdown-toggle display-4" href="#" data-toggle="dropdown-submenu" aria-expanded="false">Users</a><div class="dropdown-menu">
      <a class="text-white dropdown-item text-primary display-4" href="tigress-academics.html">For academics<br></a>
      <a class="text-white dropdown-item text-primary display-4" href="tigress-students.html">For students<br></a>
      <a class="text-white dropdown-item text-primary display-4" href="tigress-practitioners.html">For practitioners<br></a>
      <a class="text-white dropdown-item text-primary display-4" href="tigress-developers.html">For developers<br></a></div>
   </li>
   <li class="nav-item dropdown">
      <a class="nav-link link text-white dropdown-toggle display-4" href="#" aria-expanded="false" data-toggle="dropdown-submenu">News</a><div class="dropdown-menu">
      <a class="text-white dropdown-item text-primary display-4" href="tigress-news.html" aria-expanded="false">News</a>
      <a class="text-white dropdown-item text-primary display-4" href="tigress-blog.html" aria-expanded="false">Blog</a>
      <a class="text-white dropdown-item text-primary display-4" href="tigress-vendors.html" aria-expanded="false">Tools &amp; Vendors</a>
      <a class="text-white dropdown-item text-primary display-4" href="tigress-update3to4.html" aria-expanded="false">Updates v3 âžž v4</a></div>
   </li>
   <li class="nav-item dropdown">
      <a class="nav-link link text-white dropdown-toggle display-4" href="#" data-toggle="dropdown-submenu" aria-expanded="false">Transformations</a><div class="dropdown-menu">
      <a class="text-white dropdown-item text-primary display-4" href="control-transforms.html">Control</a>
      <a class="text-white dropdown-item text-primary display-4" href="data-transforms.html">Data</a>
      <a class="text-white dropdown-item text-primary display-4" href="functions-transforms.html">Functions</a>
      <a class="text-white dropdown-item text-primary display-4" href="integrity-transforms.html">Integrity</a>
      <a class="text-white dropdown-item text-primary display-4" href="antiAnalysis-transforms.html">Anti analysis</a>
      <a class="text-white dropdown-item text-primary display-4" href="other-transforms.html">Other</a></div>
   </li>
   <li class="nav-item dropdown">
      <a class="nav-link link text-white dropdown-toggle display-4" href="#" data-toggle="dropdown-submenu" aria-expanded="false">About</a><div class="dropdown-menu">
      <a class="text-white dropdown-item text-primary display-4" href="tigress-about.html">History<br></a>
      <a class="text-white dropdown-item text-primary display-4" href="tigress-FAQ.html">FAQ<br></a>
      <a class="text-white dropdown-item text-primary display-4" href="tigress-consulting.html">Training<br></a>
      <a class="text-white dropdown-item text-primary display-4" href="tigress-publications.html">Pubs</a></div>
   </li>
   <li class="nav-item">
      <a class="nav-link link text-white text-primary display-4" href="tigress-contact.html" aria-expanded="false"><span class="socicon socicon-mail mbr-iconfont mbr-iconfont-btn" style="color: rgb(255, 127, 159);"></span></a>
   </li>
   <li class="nav-item">
      <a class="nav-link link text-white text-primary display-4" href="tigress-download.html" aria-expanded="false"><span class="mbrib-download mbr-iconfont mbr-iconfont-btn" style="color: rgb(255, 127, 159);"></span></a>
   </li>
</ul>
            
        </div>
    </nav>

</section>

<br><br><br><br>

<section class="mbr-section content4 TIGRESS-TITLE" id="content4-dz">
    <div class="container">
        <div class="media-container-row">
            <div class="title col-12 col-md-8">
                <h2 class="align-center pb-3 mbr-fonts-style display-2">
<center><h1 style="font-size: 60px; font-weight:400"> File Merge</h1></center>

               </h2>
            </div>
        </div>
    </div>
</section>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
Tigress is a <em>whole-program transformer</em>. Essentially, this
means that Tigress accepts <em>a single</em> C file as input. This is
so that we can do whole-program analysis and transformations. For
example, the <em>EncodeData</em> transformation has to perform
a <em>whole program alias analysis</em> to avoid generating the wrong
code, and the <em>Inline </em>transformation -- <em>of course</em> --
needs the code of a function in order to expand it
inline.

            </p>
        </div>
    </div>
</section>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
What this is that, for typical programs that consist of multiple C files,
before we can actually perform any Tigress transormations, we must first
merge the files together. 

            </p>
        </div>
    </div>
</section>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
There are many ways to merge a program. If you're writing your program from 
scratch and know you will be obfuscating it, it makes sense to write it in 
such a way that merging becomes easy. This has other advantages such as
improving the compiler's ability to optimize. It's not hard to do this, 
simply make sure that all global identifiers are unique! For example, if
you have a C module  <code class="language-c">foo.c/.h</code> you should give every C object 
(functions, variiables, structs, enums, etc.) the prefix <code class="language-c">foo_</code>. 
Then merging might be no harder than this:

            </p>
        </div>
    </div>
</section>

<div class="container">
<pre style="box-shadow: -5px 0 0 0 red, 0 0 0 1px #dfdfdf"><code class="language-bash">> cat *.h *.c > merged.c
</code></pre></div><br>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
Merging C programs is a fairly common problem and many people have 
tried to write their own automatic mergers. Searching for "amalgamate"
on <a href="https://github.com">github</a> yields several hits:

            </p>
        </div>
    </div>
</section>


<section class="mbr-section article content12 TIGRESS-UL" id="content12-dv">
    <div class="container">
        <div class="media-container-row">
            <div class="mbr-text counter-container col-12 col-md-8 mbr-fonts-style display-7">
                <ul>

<li>
      <a href="https://github.com/rindeal/Amalgamate">      https://github.com/rindeal/Amalgamate        </a>  

</li>

<li>
       <a href="https://github.com/Felerius/cpp-amalgamate"> https://github.com/Felerius/cpp-amalgamate   </a>  

</li>

<li>
      <a href="https://github.com/shrpnsld/amalgamate">     https://github.com/shrpnsld/amalgamate       </a>  

</li>

                </ul>
            </div>
        </div>
    </div>
</section>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
A number of projects have found that advantageous to distribute their code as a single merged file
rather than a large collection of <code class="language-c">.c/.h</code> files. Examples include:

            </p>
        </div>
    </div>
</section>


<section class="mbr-section article content12 TIGRESS-UL" id="content12-dv">
    <div class="container">
        <div class="media-container-row">
            <div class="mbr-text counter-container col-12 col-md-8 mbr-fonts-style display-7">
                <ul>

<li>
     <a href="https://sqlite.org/download.html">  SQLite </a>

</li>


<li>
     <a href="https://github.com/lua/lua"> Lua </a>

</li>


<li>
      <a href="https://www.sourceware.org/bzip2/"> Bzip2 </a>

</li>


<li>
      <a href="https://github.com/avih/miniweb/tree/master"> Miniweb </a>

</li>


<li>
      <a href="https://github.com/antirez/kilo>"> Kilo </a>

</li>


<li>
      <a href="https://github.com/emikulic/darkhttpd"> Dark Httpd </a>

</li>

                </ul>
            </div>
        </div>
    </div>
</section>

<!-- =============================================================================================== -->


<br>
<section class="mbr-section content4 TIGRESS-SECTION" id="content4-dz">
    <div class="container">
        <div class="media-container-row">
            <div class="title col-12 col-md-8">
                <h2 class="align-center pb-3 mbr-fonts-style display-2">
 The Tigress Merger

               </h2>
            </div>
        </div>
    </div>
</section>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
Tigress comes with its own merger. If your project has multiple files you'd call
the merger before applying any obfuscating transformations. This will merge
together all the <code class="language-c">.h</code> files that your program depends on, including
all the system <code class="language-c">.h</code> files. Note that this implies that the resulting
merged file is no longer portable.

            </p>
        </div>
    </div>
</section>

<center>

<section class="TIGRESS-IMAGE" id="image2-f9">
    <figure class="mbr-figure container">
        <div class="image-block" style="width: 65%;">
            <img src="assets/images/overview-merge-1-1665x937.png" alt="" title="">
        </div>
    </figure>
</section>
</center>


           

<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
Earlier versions of Tigress (prior to Version 4) had a separate merge
program, called <strong>tigress-merge</strong>. This is no longer
needed.

            </p>
        </div>
    </div>
</section>

 

<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
For more complex merging scenarios, see the 
<a href="http://cil-project.github.io/cil/doc/html/cil/merger.html#sec-merger"
class="text-primary">CIL information page about merging.</a>;

            </p>
        </div>
    </div>
</section>
          
<!-- =============================================================================================== -->


<br>
<section class="mbr-section content4 TIGRESS-SECTION" id="content4-dz">
    <div class="container">
        <div class="media-container-row">
            <div class="title col-12 col-md-8">
                <h2 class="align-center pb-3 mbr-fonts-style display-2">
 Case Study 1

               </h2>
            </div>
        </div>
    </div>
</section>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
Here's a simple case where we're just merging two files together, to prepare
for subsequent Tigress transformations:

            </p>
        </div>
    </div>
</section>

<div class="container">
<pre style="box-shadow: -5px 0 0 0 red, 0 0 0 1px #dfdfdf"><code class="language-bash">> cat file1.c
struct foo; 
extern struct foo *global;

> cat file2.c
struct bar {
 int x;
 struct bar *next;
};

extern struct bar *global;
struct foo {
 int y;
};

extern struct foo another;
int main() {
}

> tigress file1.c file2.c --out=full.c

> gcc full.c
</code></pre></div><br>
<br>

<!-- =============================================================================================== -->


<br>
<section class="mbr-section content4 TIGRESS-SECTION" id="content4-dz">
    <div class="container">
        <div class="media-container-row">
            <div class="title col-12 col-md-8">
                <h2 class="align-center pb-3 mbr-fonts-style display-2">
 Case Study 2

               </h2>
            </div>
        </div>
    </div>
</section>

<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
Here's a slightly more complex case:

            </p>
        </div>
    </div>
</section>

<div class="container">
<pre style="box-shadow: -5px 0 0 0 red, 0 0 0 1px #dfdfdf"><code class="language-bash">> cat f1.h
struct f1_struct {int a;};
void f1_func(struct f1_struct x);

> cat f1.c
void f1_func(struct f1_struct x) {
  x.a = 10;
}

> cat f2.h
struct f2_struct {int a;};
void f2_func(struct f2_struct x);

> cat f2.c
void f2_func(struct f2_struct x) {
  x.a = 10;
}

> cat m.c

int main() {
   struct f1_struct x;
   struct f2_struct y;
   f1_func(x);
   f2_func(y);
}
</code></pre></div><br>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
Let's merge the files together into <code class="language-c">full.c</code>:

            </p>
        </div>
    </div>
</section>

<div class="container">
<pre style="box-shadow: -5px 0 0 0 red, 0 0 0 1px #dfdfdf"><code class="language-bash">> tigress f1.c f2.c m.c --out=full.c
> gcc full.c
</code></pre></div><br>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
And now we can obfuscate the merged file using Tigress' <code class="language-c">Merge</code>
transform (which merges <em>functions</em>, not <em> files</em>, of course!):

            </p>
        </div>
    </div>
</section>

<div class="container">
<pre style="box-shadow: -5px 0 0 0 red, 0 0 0 1px #dfdfdf"><code class="language-bash">> tigress --Transform=Merge \
             --Functions=f1_func,f2_func \
             --MergeName=merged \
          --out=obf.c full.c
> gcc obf.c
</code></pre></div><br>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
And this is what the resulting program looks like:

            </p>
        </div>
    </div>
</section>

<div class="container">
<pre><code class="language-c">void merged(void *tigressRetVal , struct f1_struct x__0 , struct f2_struct x__1 ,
            int whichBlock__2 ) { 
  if (whichBlock__2 == 0) {
    x__0.a = 10;
    return;
  } else
  if (whichBlock__2 == 1) {
    x__1.a = 10;
    return;
  } else {
  }
}

int main( ) { 
  struct f1_struct x ;
  struct f2_struct y ;

  merged(0, x, y, 0);
  merged(0, x, y, 1);
}
</code></pre></div><br>
<br>

<!-- =============================================================================================== -->


<br>
<section class="mbr-section content4 TIGRESS-SECTION" id="content4-dz">
    <div class="container">
        <div class="media-container-row">
            <div class="title col-12 col-md-8">
                <h2 class="align-center pb-3 mbr-fonts-style display-2">
 Case Study 3: Miniweb

               </h2>
            </div>
        </div>
    </div>
</section>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
   <a href="https://github.com/avih/miniweb/tree/master">Miniweb</a> is a small 
   web server. 

            </p>
        </div>
    </div>
</section>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
   To get the Tigress merger to work, we have to fix a few things. This is 
   pretty common when you merge a program that was not designed to be merged! 

            </p>
        </div>
    </div>
</section>


<section class="step1 TIGRESS-OL" id="step1-dy">
    <div class="container">
        <div class="step-container">


            <div class="card separline pb-4">
                <div class="step-element d-flex">
                    <div class="step-wrapper pr-3">
                        <h3 class="step d-flex align-items-center justify-content-center">
                            1
                        </h3>
                    </div>          
                    <div class="step-text-content">
                        <p class="mbr-step-text mbr-fonts-style display-7">
      First you may have to add <code class="language-c">tigress.h</code> to the top of every file. 

                        </p>
                    </div>
                </div>
            </div>

            <div class="card separline pb-4">
                <div class="step-element d-flex">
                    <div class="step-wrapper pr-3">
                        <h3 class="step d-flex align-items-center justify-content-center">
                            2
                        </h3>
                    </div>          
                    <div class="step-text-content">
                        <p class="mbr-step-text mbr-fonts-style display-7">
      Then, let's get rid of a bug:
<div class="container">
<pre style="box-shadow: -5px 0 0 0 red, 0 0 0 1px #dfdfdf"><code class="language-bash">> gsed -i 's/mwBuildHttpHeader/mwBuildHttpHeaderXXX/' httphandler.c
</code></pre></div><br>

                        </p>
                    </div>
                </div>
            </div>

        </div>
    </div>
</section>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
   Now we can call Tigress to merge, and then obfuscate:

            </p>
        </div>
    </div>
</section>

<div class="container">
<pre style="box-shadow: -5px 0 0 0 red, 0 0 0 1px #dfdfdf"><code class="language-bash">> tigress --out=miniweb-merge.c \
    httppil.c \
    http.c \
    httpxml.c \
    httphandler.c \
    httppost.c \
    httpauth.c \
    miniweb.c 
> gcc -o miniweb-merge.exe miniweb-merge.c

> tigress \
    --Transform=Virtualize \
      --Functions=mwInitParam \
    --out=miniweb-merge-obf.c miniweb-merge.c
> gcc miniweb-merge-obf.c -o  miniweb-merge-obf.exe
</code></pre></div><br>
<br>

<!-- =============================================================================================== -->


<br>
<section class="mbr-section content4 TIGRESS-SECTION" id="content4-dz">
    <div class="container">
        <div class="media-container-row">
            <div class="title col-12 col-md-8">
                <h2 class="align-center pb-3 mbr-fonts-style display-2">
 Case Study 4: SQLite

               </h2>
            </div>
        </div>
    </div>
</section>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
   <a href="https://github.com/sqlite/sqlite">SQLite</a> is an example of a
   project that contains its own source code merge routine  
   (<code class="language-c">sqlite/tool/mksqlite3c.tcl</code>). If you want to obfuscate
   SQLite you should definitely use their own merged sources, rather
   than merge with the Tigress! However, purely as an exercise, we can
   merge the raw SQLite sources using Tigress.

            </p>
        </div>
    </div>
</section>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
   As usual, some initial fixes are necessary: remove the two files <code class="language-c">src/sqlite3recover.h</code>
   and <code class="language-c">src/geopoly.c</code>. Then go ahead and merge:

            </p>
        </div>
    </div>
</section>

<div class="container">
<pre style="box-shadow: -5px 0 0 0 red, 0 0 0 1px #dfdfdf"><code class="language-bash">tigress \
   -D__USE_XOPEN2K -D__USE_GNU -D_GNU_SOURCE \
   -DSQLITE_ENABLE_MATH_FUNCTIONS \
   -DSQLITE_THREADSAFE=1   \
   -DNDEBUG \
   -D_HAVE_SQLITE_CONFIG_H \
   -DBUILD_sqlite \
   -I./src \
   -I/usr/local/include \
   -DSQLITE_HAVE_ZLIB=1 \
   -DSQLITE_DQS=0 \
   -DSQLITE_ENABLE_FTS4 \
   -DSQLITE_ENABLE_RTREE \
   -DSQLITE_ENABLE_EXPLAIN_COMMENTS \
   -DSQLITE_ENABLE_UNKNOWN_SQL_FUNCTION \
   -DSQLITE_ENABLE_STMTVTAB \
   -DSQLITE_ENABLE_DBPAGE_VTAB \
   -DSQLITE_ENABLE_DBSTAT_VTAB \
   -DSQLITE_ENABLE_BYTECODE_VTAB \
   -DSQLITE_ENABLE_OFFSET_SQL_FUNC \
   -DSQLITE_STRICT_SUBTYPE=1 \
   src/*.c \
   --out=merged.c
</code></pre></div><br>
<br>

<!-- =============================================================================================== -->


<br>
<section class="mbr-section content4 TIGRESS-SECTION" id="content4-dz">
    <div class="container">
        <div class="media-container-row">
            <div class="title col-12 col-md-8">
                <h2 class="align-center pb-3 mbr-fonts-style display-2">
 Case Study 5: DoomGeneric

               </h2>
            </div>
        </div>
    </div>
</section>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
<a href="https://github.com/ozkl/doomgeneric">DoomGeneric</a> is one of the many
versions of the Doom game. Here is how we merge the sources:

            </p>
        </div>
    </div>
</section>

<div class="container">
<pre style="box-shadow: -5px 0 0 0 red, 0 0 0 1px #dfdfdf"><code class="language-bash">> tigress  \
      dummy.c am_map.c doomdef.c doomstat.c dstrings.c d_event.c d_items.c \
      d_iwad.c d_loop.c d_main.c d_mode.c d_net.c f_finale.c f_wipe.c g_game.c \
      hu_lib.c hu_stuff.c info.c i_cdmus.c i_endoom.c i_joystick.c i_scale.c \
      i_sound.c i_system.c i_timer.c memio.c m_argv.c m_bbox.c m_cheat.c \
      m_config.c m_controls.c m_fixed.c m_menu.c m_misc.c m_random.c p_ceilng.c \
      p_doors.c p_enemy.c p_floor.c p_inter.c p_lights.c p_map.c p_maputl.c \
      p_mobj.c p_plats.c p_pspr.c p_saveg.c p_setup.c p_sight.c p_spec.c \
      p_switch.c p_telept.c p_tick.c p_user.c r_bsp.c r_data.c r_draw.c \
      r_main.c r_plane.c r_segs.c r_sky.c r_things.c sha1.c sounds.c statdump.c \
      st_lib.c st_stuff.c s_sound.c tables.c v_video.c wi_stuff.c w_checksum.c \
      w_file.c w_main.c w_wad.c z_zone.c w_file_stdc.c i_input.c i_video.c \
      doomgeneric.c doomgeneric_xlib.c \
   --out=one_doom.c
</code></pre></div><br>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
And now we can obfuscate (using the Tigress <code class="language-c">Ident</code> transormation which
does nothing!), compile, and play:

            </p>
        </div>
    </div>
</section>

<div class="container">
<pre style="box-shadow: -5px 0 0 0 red, 0 0 0 1px #dfdfdf"><code class="language-bash">> tigress \
       --Transform=Ident
       --out=one_doom.obf.c \
        one_doom.c  

> gcc -o generic ./one_doom.obf.c -lm -lc -lX11 -Wl,-Map,doomgeneric.map
</code></pre></div><br>
<br>

<!-- =============================================================================================== -->


<br>
<section class="mbr-section content4 TIGRESS-SECTION" id="content4-dz">
    <div class="container">
        <div class="media-container-row">
            <div class="title col-12 col-md-8">
                <h2 class="align-center pb-3 mbr-fonts-style display-2">
 Case Study 6: CoreUtils

               </h2>
            </div>
        </div>
    </div>
</section>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
<a href="https://www.gnu.org/software/coreutils">"The GNU Core Utilities are the basic file, shell and text 
manipulation utilities of the GNU operating system."</a> A number of academic papers use these programs
for evaluate purposes (whether this is a good idea or not is another question), so it make sense to be
able to merge them. Here is how to merge the <code class="language-c">who</code> utility:

            </p>
        </div>
    </div>
</section>


<section class="step1 TIGRESS-OL" id="step1-dy">
    <div class="container">
        <div class="step-container">


            <div class="card separline pb-4">
                <div class="step-element d-flex">
                    <div class="step-wrapper pr-3">
                        <h3 class="step d-flex align-items-center justify-content-center">
                            1
                        </h3>
                    </div>          
                    <div class="step-text-content">
                        <p class="mbr-step-text mbr-fonts-style display-7">
   Get the CoreUtils sources:
<div class="container">
<pre style="box-shadow: -5px 0 0 0 red, 0 0 0 1px #dfdfdf"><code class="language-bash">> git clone git://git.sv.gnu.org/coreutils
</code></pre></div><br>

                        </p>
                    </div>
                </div>
            </div>


            <div class="card separline pb-4">
                <div class="step-element d-flex">
                    <div class="step-wrapper pr-3">
                        <h3 class="step d-flex align-items-center justify-content-center">
                            2
                        </h3>
                    </div>          
                    <div class="step-text-content">
                        <p class="mbr-step-text mbr-fonts-style display-7">
   Run this command to get submodules and set up configuration:
<div class="container">
<pre style="box-shadow: -5px 0 0 0 red, 0 0 0 1px #dfdfdf"><code class="language-bash">> ./bootstrap
</code></pre></div><br>

                        </p>
                    </div>
                </div>
            </div>


            <div class="card separline pb-4">
                <div class="step-element d-flex">
                    <div class="step-wrapper pr-3">
                        <h3 class="step d-flex align-items-center justify-content-center">
                            3
                        </h3>
                    </div>          
                    <div class="step-text-content">
                        <p class="mbr-step-text mbr-fonts-style display-7">
   Configure the programs you want (here <code class="language-c">who</code>):
<div class="container">
<pre style="box-shadow: -5px 0 0 0 red, 0 0 0 1px #dfdfdf"><code class="language-bash">  > ./configure --enable-install-program=who --enable-no-install-program=chroot,hostid,timeout,nice,\
users,pinky,stty,df,stdbuf,b2sum,base64,base32,basenc,basename,cat,chcon,chgrp,chmod,chown,cksum,\
comm,cp,csplit,cut,date,dd,dir,dirname,dircolors,du,echo,env,expand,expr,factor,false,fmt,fold,ginstall,\
groups,head,id,join,kill,link,ln,logname,ls,md5sum,mkdir,mkfifo,mknod,mktemp,mv,nl,nproc,nohup,numfmt,od,\
paste,pathchk,pr,printenv,printf,ptx,pwd,readlink,realpath,rm,rmdir,runcon,seq,sha1sum,sha224sum,sha256sum,\
sha384sum,sha512sum,shred,shuf,sleep,sort,split,stat,sum,sync,tac,tail,tee,test,touch,tr,true,truncate,tsort,\
tty,uname,unexpand,uniq,unlink,uptime,vdir,wc,whoami,yes
</code></pre></div><br>

                        </p>
                    </div>
                </div>
            </div>


            <div class="card separline pb-4">
                <div class="step-element d-flex">
                    <div class="step-wrapper pr-3">
                        <h3 class="step d-flex align-items-center justify-content-center">
                            4
                        </h3>
                    </div>          
                    <div class="step-text-content">
                        <p class="mbr-step-text mbr-fonts-style display-7">
      Run <code class="language-c">make</code> and then hit <code class="language-c">ctrl-C</code< after all the GEN lines have passed and the actual compile (CC) start.
     This will generate <code class="language-c">./lib/configmake.h</code> (and presumably) other files that are necessary.

                        </p>
                    </div>
                </div>
            </div>


            <div class="card separline pb-4">
                <div class="step-element d-flex">
                    <div class="step-wrapper pr-3">
                        <h3 class="step d-flex align-items-center justify-content-center">
                            5
                        </h3>
                    </div>          
                    <div class="step-text-content">
                        <p class="mbr-step-text mbr-fonts-style display-7">
     Merge:
<div class="container">
<pre style="box-shadow: -5px 0 0 0 red, 0 0 0 1px #dfdfdf"><code class="language-bash">> tigress -I ./lib -I./src  src/who.c --out=/tmp/who.c
</code></pre></div><br>

                        </p>
                    </div>
                </div>
            </div>


            <div class="card separline pb-4">
                <div class="step-element d-flex">
                    <div class="step-wrapper pr-3">
                        <h3 class="step d-flex align-items-center justify-content-center">
                            6
                        </h3>
                    </div>          
                    <div class="step-text-content">
                        <p class="mbr-step-text mbr-fonts-style display-7">
     Compile and run:
<div class="container">
<pre style="box-shadow: -5px 0 0 0 red, 0 0 0 1px #dfdfdf"><code class="language-bash">> gcc  -I. -I./lib  -Ilib -I./lib -Isrc -I./src    -g -O2 -MT src/who.o -MD -MP -MF $depbase.Tpo -c -o src/who.o /tmp/who.c
> gcc   -g -O2 -Wl,--as-needed  -o src/who src/who.o src/libver.a lib/libcoreutils.a   lib/libcoreutils.a   -ldl

> src/who
collberg pts/0        2024-11-20 01:06 (100.11.0.0)
</code></pre></div><br>

                        </p>
                    </div>
                </div>
            </div>

        </div>
    </div>
</section>

<br>

<br>

  <script src="assets/popper/popper.min.js"></script>
  <script src="assets/web/assets/jquery/jquery.min.js"></script>
  <script src="assets/bootstrap/js/bootstrap.min.js"></script>
  <script src="assets/tether/tether.min.js"></script>
  <script src="assets/smoothscroll/smooth-scroll.js"></script>
  <script src="assets/dropdown/js/nav-dropdown.js"></script>
  <script src="assets/dropdown/js/navbar-dropdown.js"></script>
  <script src="assets/touchswipe/jquery.touch-swipe.min.js"></script>
  <script src="assets/theme/js/script.js"></script>
  <script src="assets/prism/prism.js"></script>
  
</body>
</html>
