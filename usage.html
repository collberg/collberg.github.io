<!DOCTYPE html>
<html  >
<head>
  <!-- Site made with Mobirise Website Builder v4.10.10, https://mobirise.com -->
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Mobirise v4.10.10, mobirise.com">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
  <link rel="shortcut icon" href="assets/images/tigress-white-128x101.png" type="image/x-icon">
  <meta name="description" content="Website Generator Description">
  
  <title>Usage</title>
  <link rel="preload" as="style" href="assets/web/assets/mobirise-icons/mobirise-icons.css">
<link rel="stylesheet" href="assets/web/assets/mobirise-icons/mobirise-icons.css">
  <link rel="preload" as="style" href="assets/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
  <link rel="preload" as="style" href="assets/bootstrap/css/bootstrap-grid.min.css">
<link rel="stylesheet" href="assets/bootstrap/css/bootstrap-grid.min.css">
  <link rel="preload" as="style" href="assets/bootstrap/css/bootstrap-reboot.min.css">
<link rel="stylesheet" href="assets/bootstrap/css/bootstrap-reboot.min.css">
  <link rel="stylesheet" href="assets/tether/tether.min.css">
  <link rel="stylesheet" href="assets/dropdown/css/style.css">
  <link rel="stylesheet" href="assets/theme/css/style.css">
  <link rel="preload" as="style" href="assets/mobirise/css/mbr-additional.css"><link rel="stylesheet" href="assets/mobirise/css/mbr-additional.css" type="text/css">
  
  
  <style>
body {
  background-color: #ffffff;
  color: #000000
}
section {
  background-color: #ffffff;
  color: #000000
}
p {
   color: #767676
}
h3 {
   color: #767676
}
</style>


</head>
<body>
  <section class="menu cid-rCFaEeaKON" once="menu" id="menu1-g">

    

    <nav class="navbar navbar-expand beta-menu navbar-dropdown align-items-center navbar-fixed-top navbar-toggleable-sm">
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
            </div>
        </button>
        <div class="menu-logo">
            <div class="navbar-brand">
                <span class="navbar-logo">
                    <a href="index.html">
                         <img src="assets/images/tigress-white-copy-154x122.png" alt="Mobirise" title="" style="height: 3.8rem;">
                    </a>
                </span>
                <span class="navbar-caption-wrap"><a class="navbar-caption text-white display-4" href="index.html">
                        Tigress</a></span>
            </div>
        </div>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav nav-dropdown nav-right" data-app-modern-menu="true"><li class="nav-item">
                    <a class="nav-link link text-white display-4" href="index.html">
                        
                        Home</a>
                </li><li class="nav-item">
                    <a class="nav-link link text-white display-4" href="introduction.html">
                        
                        Introduction</a>
                </li><li class="nav-item"><a class="nav-link link text-white display-4" href="usage.html">Usage</a></li><li class="nav-item"><a class="nav-link link text-white display-4" href="transformations.html">Transformations</a></li><li class="nav-item"><a class="nav-link link text-white display-4" href="publications.html">Publications</a></li><li class="nav-item"><a class="nav-link link text-white display-4" href="FAQ.html">FAQ</a></li><li class="nav-item"><a class="nav-link link text-white display-4" href="consulting.html">Consulting/Training</a></li><li class="nav-item"><a class="nav-link link text-white display-4" href="about.html">About</a></li><li class="nav-item"><a class="nav-link link text-white display-4" href="contact.html">Contact</a></li></ul>
            
        </div>
    </nav>
</section>

<section class="engine"><a href="https://mobirise.info/e">make your own site for free</a></section><section class="mbr-section article content1 cid-rDQOMX8P31" id="content1-u">
    
     

    <div class="container">
        <div class="media-container-row">
            <div class="mbr-text col-12 mbr-fonts-style display-7 col-md-12"><p><br></p><p><br></p><p>To obfuscate your program with Tigress first include the tigress.h file supplied in the Tigress distribution directory, and then invoke Tigress specifying at least one transformation applied to at least one function. Here is a trivial example where Tigress is flattening the function bar in the program foo.c:</p></div>
        </div>
    </div>
</section>

<div id="custom-html-k"><center>
    <div style="width:600px;overflow:auto">
    <pre style="text-align:left;background-color:#f0f0f0;display:inline-block;padding:20px;border:1px solid black;"><code contenteditable="" spellcheck="false">#include "PATH-TO-TIGRESS-INSTALLATION/tigress.h"
void bar () {
    ...
}
int main () {
   ...
}
</code></pre>
</div>
</center>
</div>

<div id="custom-html-i"><center>
<pre style="text-align:left;background-color:#f0f0f0;display:inline-block;padding:20px;border:1px solid black"><code>tigress \
   --Environment=x86_64:Linux:Gcc:4.6 \
   --Transform=Flatten \
      --Functions=bar \
   --out=foo_out.c foo.c
</code></pre>
</center>
</div>

<section class="mbr-section article content1 cid-rE3ete9d8p" id="content1-h">
    
     

    <div class="container">
        <div class="media-container-row">
            <div class="mbr-text col-12 mbr-fonts-style display-7 col-md-12"><p>
                <strong> Command line options.</strong>&nbsp;These are some useful Tigress command line options:</p></div>
        </div>
    </div>
</section>

<div id="custom-html-f"><!-- Type valid HTML here -->
<center>
<pre style="text-align:left;background-color:#f0f0f0;display:inline-block;padding:20px;border:1px solid black"><code>*) tigress --help     : Show this message
*) tigress --install  : Show how to install Tigress 
*) tigress --test     : Show how to run tests to ensure proper installation 
*) tigress --options  : Show complete list of options to tigress
*) tigress --license  : Display the tigress license
*) tigress --bugs     : How to get past some known issues
*) tigress --version  : Show the current Tigress version
</code></pre>
</center></div>

<section class="mbr-section article content1 cid-rE3ethkTec" id="content1-i">
    
     

    <div class="container">
        <div class="media-container-row">
            <div class="mbr-text col-12 mbr-fonts-style display-7 col-md-12"><p><strong>Multiple Input Files.</strong>&nbsp;<span style="font-size: 1rem;">Note that Tigress accepts <em>exactly one</em> C file as input. This is so that Tigress can do whole-program analysis and transformations. If your project has multiple files you must first merge them together into one. Tigress (through the CIL library on which it is built) allows you to merge your source files automatically. For complex scenarios, see the CIL information page about <a href="http://cil-project.github.io/cil/doc/html/cil/merger.html#sec-merger" target="_blank">merging</a>. For simple cases, all you have to do to merge two files file1.c and file2.c into full.c, is to call the tigress-merge program like this:&nbsp;</span></p></div>
        </div>
    </div>
</section>

<div id="custom-html-k"><!-- Type valid HTML here -->
<center>
<pre style="text-align:left;background-color:#f0f0f0;display:inline-block;padding:20px;border:1px solid black"><code>$ tigress-merge file1.c file2.c --out=full.c
</code></pre></center></div>

<section class="mbr-section article content1 cid-rE3kNoI7NA" id="content1-l">
    
     

    <div class="container">
        <div class="media-container-row">
            <div class="mbr-text col-12 mbr-fonts-style display-7 col-md-12"><p>
                <strong> Cross-compilation and 32-vs-64-bit machine models.</strong>&nbsp;<span style="font-size: 1rem;">By default, we assume you're generating code for the machine on which you execute Tigress. If this is not the case, in particular, if your target machine has a different wordsize than the one you compile on, you must run Tigress with the<strong> --envmachine</strong> option and&nbsp;</span><span style="font-size: 1rem;">set the <strong>CIL_MACHINE</strong> environment variable with the relevant C type sizes. For the current version of Tigress, this is really only relevant for the virtualize transformation. See the <a href="https://people.eecs.berkeley.edu/~necula/cil/cil007.html" target="_blank">CIL documentation</a> for more information. </span></p><p><span style="font-size: 1rem;">If you want to use a specific compiler (other than the default gcc) &nbsp;you can use the <strong>--gcc=command</strong> to tell cilly which compiler to use, for example --gcc=arm-elf-gcc.</span></p><p><span style="font-size: 1rem;">Here's an example of how to set CIL_MACHINE for a typical 32-bit target:</span><br></p></div>
        </div>
    </div>
</section>

<div id="custom-html-m"><center>
<pre style="text-align:left;background-color:#f0f0f0;display:inline-block;padding:20px;border:1px solid black"><code>CIL_MACHINE="short=2,2 int=4,4 long=4,4 long_long=8,8 pointer=4,4 \
             alignof_enum=4 float=4,4 double=8,8 long_double=12,12 \
             void=1 bool=1,1 fun=1,1 alignof_string=1 max_alignment=16 \
             size_t=unsigned_int wchar_t=int char_signed=true \
             const_string_literals=true big_endian=false \
             __thread_is_keyword=true __builtin_va_list=true \
             underscore_name=true"; export CIL_MACHINE;
</code></pre></center>


</div>

<section class="header9 cid-rGDOlD4yG3" id="header9-e">

    

    

    <div class="container">
        <div class="media-container-column mbr-white">
            
            
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7"><strong>WebAssembly</strong>: Below is an example of how to first obfuscate a C progra foo_in.c with Tigress, and then compile the obfuscated file foo_obf.c with <a href="https://emscripten.org" target="_blank">Emscripten</a> to a WebAssembly/html/Javascript package. Note the use of the CIL_MACHINE environment variable and the --envmachine argument to Tigress; these specify that the word size of the target machine (WASM) is different from that of the machine of which Tigress is run. Notice also the --gcc=emcc argument to Tigress. This specifies that the WebAssembly compiler (emcc) should be used, rather than the native C compiler.<br></p>
            
        </div>
    </div>

    
</section>

<div id="custom-html-f"><center>
<div style="width:1000px;overflow:auto">
<pre style="text-align:left;background-color:#f0f0f0;display:inline-block;padding:20px;border:1px solid black;"><code contenteditable="" spellcheck="false">export EMSDKPATH=PATH-TO-EMCC-INSTALLATION/emsdk/emscripten/1.38.29/system/include/

export CIL_MACHINE="short=2,2 int=4,4 long=4,4 long_long=8,8 pointer=4,4 alignof_enum=4 float=4,4 \
             double=8,8 long_double=8,8 void=1 bool=1,1 fun=1,4 alignof_string=1 max_alignment=16 \
             size_t=unsigned_long wchar_t=int char_signed=true const_string_literals=true \
             big_endian=false __thread_is_keyword=true __builtin_va_list=true underscore_name=true"
             
tigress \
   --gcc=emcc \
   --envmachine \
   -D _Float128=double \
   -I $EMSDKPATH \
   --Environment=x86_64:Linux:Gcc:4.6 \
   --Transform=Flatten \
      --Functions=bar \
   --out=foo_obf.c foo_in.c 
</code></pre>
</div>
</center>
</div>

<div id="custom-html-g"><center>
    <div style="width:600px;overflow:auto">
    <pre style="text-align:left;background-color:#f0f0f0;display:inline-block;padding:20px;border:1px solid black;"><code contenteditable="" spellcheck="false">emcc \
   -I $EMSDKPATH \
   -O2 \
   foo_obf.c \
   -o foo_wasm.html \
   -s WASM=1 \
   -s ALLOW_MEMORY_GROWTH=1 \
   -s AGGRESSIVE_VARIABLE_ELIMINATION=1 \
   -s ERROR_ON_UNDEFINED_SYMBOLS=0 \
   -s USE_WEBGL2=1 \
   -s USE_GLFW=3 \
   -s FULL_ES3=1 \
   -fmacro-backtrace-limit=0
</code></pre>
</div>
</center>
</div>

<section class="mbr-section article content1 cid-rE3rhVoWZt" id="content1-n">
    
     

    <div class="container">
        <div class="media-container-row">
            <div class="mbr-text col-12 mbr-fonts-style display-7 col-md-12"><p>
                <strong> Bugs and other issues.</strong>&nbsp;There are some platform specific issues (particularly on clang/Darwin), and some bugs that originate either in CIL or the underlying compilers. Here's what we know about:</p></div>
        </div>
    </div>
</section>

<section class="mbr-section article content12 cid-rE3rSCG2bQ" id="content12-o">
     

    <div class="container">
        <div class="media-container-row">
            <div class="mbr-text counter-container col-12 col-md-8 mbr-fonts-style display-7">
                <ul>
                    <li><strong>Darwin extensions. </strong>If you experience issues on clang/Darwin, start by including this file: <strong>bin/tigress/3.0/tigress.h</strong>&nbsp;at the top of your source files. If you still get compilation errors (in particular when the tigress processes standard .h files, such as stdio.h), let me know. I think I have covered all the issues (particularly with the #include&lt;Availability.h&gt; file), but since there's not much documentation it's hard to know.</li>
                    <li><strong>Clang issue (1).&nbsp;</strong>Compile with <strong>-fgnu89-inline</strong> &nbsp;to get past a redeclaration bug in MAC OS 10.9. For an explanation, see, for example, <a href="http://sourceforge.net/p/resil/tickets/6" target="_blank">http//sourceforge.net/p/resil/tickets/6</a>.</li><li><strong>Clang issue (2).</strong><span style="font-size: 1rem;">&nbsp;Compile with </span><strong>-Wno-builtin-requires-header</strong><span style="font-size: 1rem;"> to avoid a spurious warning generated by clang.</span></li><li><strong>CIL issue (1). </strong>CIL fails on Gcc torture test pr15296.c: <strong>typedef int __attribute__ ((mode (__pointer__))) intptr_t;</strong></li><li><strong>CIL issue (2). </strong>CIL fails on<strong> __alignof__(void).</strong></li><li><strong>Glibc issue.</strong> If you get someting like<br><span style="font-size: 1rem;">&nbsp; &nbsp;/usr/include/bits/mathcalls-helper-functions.h[21:12-28] : syntax error<br></span><span style="font-size: 1rem;">&nbsp; &nbsp;Parsing errorFatal error: exception Frontc.ParseError("Parse error")<br></span><span style="font-size: 1rem;">you may have run into an issue with recent versions of glibc which</span><span style="font-size: 1rem;">&nbsp;now support 128-bit floats (Tigress doesn't). There are two potential ways</span><span style="font-size: 1rem;">&nbsp;to fix this:<br></span><span style="font-size: 1rem;">1)&nbsp;</span><span style="font-size: 1rem;">add <strong>-D _Float128=double</strong> to the Tigress command line or 2)&nbsp;</span><span style="font-size: 1rem;">add <strong>#undef __HAVE_DISTINCT_FLOAT128</strong> before including mat</span><span style="font-size: 1rem;">h.h.</span></li><li><span style="font-size: 1rem;"><strong>C99 issue. </strong>Tigress supports the C99 language. Depending on your compiler, you may have to add a switch (such as<strong> -std=c99 </strong>for gcc) to indicate this.</span></li>
                </ul>
            </div>
        </div>
    </div>
</section>


  <script src="assets/web/assets/jquery/jquery.min.js"></script>
  <script src="assets/popper/popper.min.js"></script>
  <script src="assets/bootstrap/js/bootstrap.min.js"></script>
  <script async src="assets/tether/tether.min.js"></script>
  <script async src="assets/smoothscroll/smooth-scroll.js"></script>
  <script async src="assets/dropdown/js/nav-dropdown.js"></script>
  <script async src="assets/dropdown/js/navbar-dropdown.js"></script>
  <script async src="assets/touchswipe/jquery.touch-swipe.min.js"></script>
  <script async src="assets/theme/js/script.js"></script>
  
  

</body>
</html>