
<!DOCTYPE html>
<html  >
<head>
  
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
  <link rel="shortcut icon" href="assets/images/tigress-white-128x101.png" type="image/x-icon">
  <meta name="description" content="Web Maker Description">
  
   <link rel="stylesheet" href="assets/web/assets/mobirise-icons/mobirise-icons.css">
  <link rel="stylesheet" href="assets/web/assets/mobirise-icons-bold/mobirise-icons-bold.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-grid.min.css">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-reboot.min.css">
  <link rel="stylesheet" href="assets/tether/tether.min.css">
  <link rel="stylesheet" href="assets/popup-overlay-plugin/style.css">
  <link rel="stylesheet" href="assets/dropdown/css/style.css">
  <link rel="stylesheet" href="assets/socicon/css/styles.css">
  <link rel="stylesheet" href="assets/theme/css/style.css">
  <link rel="preload" href="https://fonts.googleapis.com/css?family=Rubik:300,400,500,600,700,800,900,300i,400i,500i,600i,700i,800i,900i&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Rubik:300,400,500,600,700,800,900,300i,400i,500i,600i,700i,800i,900i&display=swap"></noscript>
  <link rel="preload" as="style" href="assets/mobirise/css/mbr-additional.css"><link rel="stylesheet" href="assets/mobirise/css/mbr-additional.css" type="text/css">
  <link rel="preload" as="style" href="assets/mobirise/css/tigress.css">       <link rel="stylesheet" href="assets/mobirise/css/tigress.css"        type="text/css">
  
  
 <style>
body {
  background-color: #ffffff;
  color: #000000
}
section {
  background-color: #ffffff;
  color: #000000
}
p {
   color: #767676
}
h3 {
   color: #767676
}
code {
  font-family:     "Courier New"
                    Courier
                    monospace;
  color: black;
}

</style>
  
</head>
<body>
  
  <section class="menu cid-um5eFJALJY" once="menu" id="menu1-16">

    

    <nav class="navbar navbar-expand beta-menu navbar-dropdown align-items-center navbar-fixed-top navbar-toggleable-sm">
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
            </div>
        </button>
        <div class="menu-logo">
            <div class="navbar-brand">
                <span class="navbar-logo">
                    <a href="index.html">
                         <img src="assets/images/screenshot-2024-08-20-at-14.25.07-copy-126x121.png" alt="" title="" style="height: 4.1rem;">
                    </a>
                </span>
                <span class="navbar-caption-wrap"><a class="navbar-caption text-white display-4" href="index.html">
                        Tigress</a></span>
            </div>
        </div>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav nav-dropdown nav-right" data-app-modern-menu="true"><li class="nav-item dropdown">
                    <a class="nav-link link text-white dropdown-toggle display-4" href="#" data-toggle="dropdown-submenu" aria-expanded="false">Usage</a><div class="dropdown-menu"><a class="text-white dropdown-item text-primary display-4" href="quickstart.html">Quickstart<br></a><a class="text-white dropdown-item text-primary display-4" href="mergeFiles.html">File merge<br></a><a class="text-white dropdown-item text-primary display-4" href="crossCompile.html">Cross compile</a><a class="text-white dropdown-item text-primary display-4" href="recipes.html">Recipes</a><a class="text-white dropdown-item text-primary display-4" href="libraries.html">Libraries</a><a class="text-white dropdown-item text-primary display-4" href="top-level.html">Top-Level Options</a><a class="text-white dropdown-item text-primary display-4" href="bugs.html">Issues</a><a class="text-white dropdown-item text-primary display-4" href="tigress-test.html">Testing</a></div>
                </li><li class="nav-item dropdown"><a class="nav-link link text-white dropdown-toggle display-4" href="#" data-toggle="dropdown-submenu" aria-expanded="false">Platforms</a><div class="dropdown-menu"><a class="text-white dropdown-item text-primary display-4" href="linux.html">Linux<br></a><a class="text-white dropdown-item text-primary display-4" href="macos.html">MaxOS<br></a><a class="text-white dropdown-item text-primary display-4" href="windows.html">Windows<br></a><a class="text-white dropdown-item text-primary display-4" href="android.html">Android<br></a><a class="text-white dropdown-item text-primary display-4" href="wasm.html">WASM<br></a></div></li><li class="nav-item dropdown"><a class="nav-link link text-white dropdown-toggle display-4" href="#" data-toggle="dropdown-submenu" aria-expanded="false">Users</a><div class="dropdown-menu"><a class="text-white dropdown-item text-primary display-4" href="academics.html">For academics<br></a><a class="text-white dropdown-item text-primary display-4" href="students.html">For students<br></a><a class="text-white dropdown-item text-primary display-4" href="practitioners.html">For practitioners<br></a><a class="text-white dropdown-item text-primary display-4" href="developers.html">For developers<br></a></div></li><li class="nav-item dropdown"><a class="nav-link link text-white dropdown-toggle display-4" href="#" aria-expanded="false" data-toggle="dropdown-submenu">News</a><div class="dropdown-menu"><a class="text-white dropdown-item text-primary display-4" href="news.html" aria-expanded="false">News</a><a class="text-white dropdown-item text-primary display-4" href="blog.html" aria-expanded="false">Blog</a><a class="text-white dropdown-item text-primary display-4" href="update3to4.html" aria-expanded="false">Updates v3 ➞ v4</a></div></li><li class="nav-item dropdown"><a class="nav-link link text-white dropdown-toggle display-4" href="#" data-toggle="dropdown-submenu" aria-expanded="false">Transformations</a><div class="dropdown-menu"><a class="text-white dropdown-item text-primary display-4" href="control.html">Control</a><a class="text-white dropdown-item text-primary display-4" href="data.html">Data</a><a class="text-white dropdown-item text-primary display-4" href="functions.html">Functions</a><a class="text-white dropdown-item text-primary display-4" href="integrity.html">Integrity</a><a class="text-white dropdown-item text-primary display-4" href="environment.html">Environment</a><a class="text-white dropdown-item text-primary display-4" href="antiAnalysis.html">Anti analysis</a><a class="text-white dropdown-item text-primary display-4" href="other.html">Other</a></div></li><li class="nav-item dropdown"><a class="nav-link link text-white dropdown-toggle display-4" href="#" data-toggle="dropdown-submenu" aria-expanded="false">About</a><div class="dropdown-menu"><a class="text-white dropdown-item text-primary display-4" href="about.html">History<br></a><a class="text-white dropdown-item text-primary display-4" href="FAQ.html">FAQ<br></a><a class="text-white dropdown-item text-primary display-4" href="consulting.html">Training<br></a><a class="text-white dropdown-item text-primary display-4" href="publications.html">Pubs</a></div></li><li class="nav-item"><a class="nav-link link text-white text-primary display-4" href="contact.html" aria-expanded="false"><span class="socicon socicon-mail mbr-iconfont mbr-iconfont-btn"></span></a></li><li class="nav-item"><a class="nav-link link text-white text-primary display-4" href="download4.html" aria-expanded="false"><span class="mbrib-download mbr-iconfont mbr-iconfont-btn"></span></a></li></ul>
            
        </div>
    </nav>
</section>

<section class="mbr-section content4 cid-um76AkwEWF" id="content4-8v">

<section class="header1 cid-rDchnY6HD8" id="header16-n">

<section class="mbr-section content4 TIGRESS-TITLE" id="content4-dz">
    <div class="container">
        <div class="media-container-row">
            <div class="title col-12 col-md-8">
                <h2 class="align-center pb-3 mbr-fonts-style display-2">
 Plugins

               </h2>
            </div>
        </div>
    </div>
</section>

<center><img width="500px" src="tigress3-images/plugins-front-page.png"></center>

<a class="anchor" id="plugins">&nbsp;</a>

<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
Tigress has a simple way of letting you add code (we call
them <em>plugins</em>) that we can then incorporate into the
obfuscated program. For now, there are just two applications of
plugins: you can provide your own <em>responders</em>
  and <em>invariants</em> which are proprietary to you and unique
to your application.  Responders are code snippets that will be invoked
when there has been some sort of integrity violation, such as a 
checksum failure, and invariants are true facts about your code
that can be used to create opaque predicates. These are the 
available options:

            </p>
        </div>
    </div>
</section>

<center>
<div style="mbr-text align-left pb-3 mbr-fonts-style display-7">
<table border style="background-color:#f5f5f5;overflow-x:auto;color:black;width:80%;">
    <colgroup>
       <col span="1" style="width: 20%;">
       <col span="1" style="width: 20%;">
       <col span="1" style="width: 60%;">
    </colgroup>
<tr><th>Option</th><th>Arguments</th><th>Description</th></tr>
<tr>
<td><tt>--Transform</tt></td>
<td><tt>InitPlugins</tt></td>
<td> Initialize the plugin system. </td>
</tr>
<tr>
<td><tt>--InitPluginsMBAPrefix</tt></td>
<td><tt><em>String</em></tt></td>
<td> The prefix for the name of MBA plugin functions. Default=NONE.</td>
</tr>
<tr>
<td><tt>--InitPluginsInvariantPrefix</tt></td>
<td><tt><em>String</em></tt></td>
<td> The prefix for the name of invariant plugin functions. Default=NONE.</td>
</tr>
<tr>
<td><tt>--InitPluginsResponderPrefix</tt></td>
<td><tt><em>String</em></tt></td>
<td> The prefix for the name of responder plugin functions. Default=NONE.</td>
</tr>
</table>
</div>

</center>
</br>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
 Plugin functions can take parameters. Two special parameters <tt>argc</tt> and <tt>argv</tt>
(of type <tt>int</tt> and <tt>char**</tt>, respectively) will be initialized with the 
arguments passed to <tt>main()</tt>. Any remaining formal parameters (which need to be
of arithmetic types) will be initialized with random local variables found where the 
plugin function is inserted. They can be read but should, obviously, not be modified,
unless you're writing a <em>responder</em> that you want to crash the program.

            </p>
        </div>
    </div>
</section>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
The plugin functions are only used during obfuscation and are removed from the resulting
program.

            </p>
        </div>
    </div>
</section>

<a class="anchor" id="mba-expressions">&nbsp;</a>

<section class="mbr-section content4 TIGRESS-SECTION" id="content4-dz">
    <div class="container">
        <div class="media-container-row">
            <div class="title col-12 col-md-8">
                <h2 class="align-center pb-3 mbr-fonts-style display-2">
 MBA Expressions

               </h2>
            </div>
        </div>
    </div>
</section>

<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
 For the <tt>--Transform=EncodeArithmetic</tt> transformation, you can extend the built-in
MBA expressions with your own. 

            </p>
        </div>
    </div>
</section>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
 The plugin functions should be named <tt>prefix_operator</tt> or <tt>prefix_operator_number</tt> (if there
is need for disambiguation). The <tt>operator<tt> should beone of <tt> PlusA, MinusA, Mult;Div, Mod, Shiftlt, Shiftrt, Lt,
Gt, Le, Ge, Eq, Ne, BAnd, BXor, BOr, LAnd, LOr</tt> (for binary operators) and one of <tt>Neg, BNot, LNot</tt>
(for unary operators). For binary operators the functions should have 2 arguments which need to be of the same
arithmetic types as the return type. The body of the functions should be a single return statement that is
the MBA expression. Here are a few examples.

            </p>
        </div>
    </div>
</section>

<center>
<pre style="text-align:left;background-color:#f0f0f0;display:inline-block;padding:20px;border:1px solid black;"><code contenteditable spellcheck="false">int mba_PlusA_1 (int x, int y) {
  return (x|y)+(x&y);
}

int mba_PlusA_2 (int x, int y) {
  return x− ~y −1;
}

long mba_PlusA_3 (long x, long y) {
  return x− ~y −1;
}

int mba_BXor (int x, int y) {
   return (x|y)–(x&y);
}
</code></pre>
</center>

<a class="anchor" id="invariants">&nbsp;</a>

<section class="mbr-section content4 TIGRESS-SECTION" id="content4-dz">
    <div class="container">
        <div class="media-container-row">
            <div class="title col-12 col-md-8">
                <h2 class="align-center pb-3 mbr-fonts-style display-2">
 Invariants

               </h2>
            </div>
        </div>
    </div>
</section>

<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
The purpose of invariant plugins is to allow the application
developer to provide properties about the program that Tigress itself
would not be able to figure out. These properties can then be used in
Tigress transformations, often causing the program to crash or
misbehave if an adversary modifies the program such that the
invariants no longer hold.

            </p>
        </div>
    </div>
</section>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
Invariant plugin functions should always return an int. The name of
an invariant plugin function should start with the <em>prefix</em>
(set by the <tt>--InitPluginsInvariantPrefix=<em>prefix</em></tt>
option) and be followed by an encoding of the value(s) the function
will return. These are the possible specifications:

            </p>
        </div>
    </div>
</section>

<section class="mbr-section article content12 TIGRESS-UL" id="content12-dv">
    <div class="container">
        <div class="media-container-row">
            <div class="mbr-text counter-container col-12 col-md-8 mbr-fonts-style display-7">
                <ul>

<li>
         <tt>ANY</tt> : the function returns an arbitrary value.

</li>

<li>
         <tt>VALUE_<em>value</em></tt> : the function always returns the integer <em>value</em>.

</li>

<li>
         <tt>MIN_<em>value</em></tt> : the function always returns an integer greater than or equal to <em>value</em>.

</li>

<li>
         <tt>MAX_<em>value</em></tt> : the function always returns an integer less than or equal to <em>value</em>.

</li>

<li>
         <tt>RANGE_<em>from</em>_<em>to</em></tt> : the function always returns an integer in the range <tt>[<em>from</em>, <em>to</em>]</tt>, inclusive.

</li>

                </ul>
            </div>
        </div>
    </div>
</section>

<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
Extra underscore characters can be freely added to the name (for disabiguation) and will be stripped out.

            </p>
        </div>
    </div>
</section>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
For example, if you have set <tt>--InitPluginsInvariantPrefix=<em>acme</em></tt> 
you could add the following function to your application: 

            </p>
        </div>
    </div>
</section>
<center>
<pre style="text-align:left;background-color:#f0f0f0;display:inline-block;padding:20px;border:1px solid black;"><code contenteditable spellcheck="false">int highScore = 0;     /* Always less than 100! */
...
int acme_RANGE_0_99 (void) {
   return highScore;
}
</code></pre>
</center>

<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
The idea here is that transformations which use opaque predicates will
introduce code that assumes that <tt>0 &le; highScore &lt; 100</tt>. If
an attacker modifies the code so that <tt>highScore</tt> is outside of
this range, the program will start to misbehave.

            </p>
        </div>
    </div>
</section>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
Here is how you would call Tigress with the <tt>AddOpaque</tt> transform:

            </p>
        </div>
    </div>
</section>
<center>
<pre style="text-align:left;background-color:#f0f0f0;display:inline-block;padding:20px;border:1px solid black;"><code contenteditable spellcheck="false">tigress \
           --Transform=InitPlugins  --InitPluginsInvariantPrefix=acme    \
           --Transform=InitOpaque --Functions=main --InitOpaqueStructs=plugin    \
           --Transform=AddOpaque \
              --Functions=* \
              --AddOpaqueKinds=true \
              --AddOpaqueStructs=plugin	\
</code></pre>
</center>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
Here are some examples of invariant plugin functions:

            </p>
        </div>
    </div>
</section>
<center>
<pre style="text-align:left;background-color:#f0f0f0;display:inline-block;padding:20px;border:1px solid black;"><code contenteditable spellcheck="false">/* Returns a random value */
int acme_ANY (void) {
   return list_length(myList);
}

/* Returns 42. */
int acme_VALUE_42 (void) {
   return aes_key[4];
}

/* Returns 5. */
int acme_VALUE_5 (void) {
   return 5;
}

/* Returns 5, assuming the program is supposed to always be called with 5 arguments. */
/* Note the use of the extra _ to disambiguate from the previous function. */
int acme_VALUE_5_ (int argc) {
   return argc;
}

/* Returns a value in [10..]. */
int acme_MIN_10 () {
   return 10 + random();
}

/* Returns a value in [..10]. */
int acme_MAX_10 () {
   return (random() % 11);
}

/* Returns a value in [10..20]. */
int acme_RANGE_10_20 () {
   return 10 + (random() % 11);
}

/* Returns the length of the argument list, for a program
   that is expected to be called with 1,2, or 3 arguments . */
int acme_RANGE_1_3 (int argc) {
   return argc;
}
</code></pre>
</center>


<a class="anchor" id="responders">&nbsp;</a>

<section class="mbr-section content4 TIGRESS-SECTION" id="content4-dz">
    <div class="container">
        <div class="media-container-row">
            <div class="title col-12 col-md-8">
                <h2 class="align-center pb-3 mbr-fonts-style display-2">
 Responders

               </h2>
            </div>
        </div>
    </div>
</section>

<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
Tigress has a few simple built-in responders that can be used in the
<tt>Checksum</tt> transformation. With plugins, you can easily add
your own responders to your application. Responder plugin
functions should always return <tt>void</tt>.

            </p>
        </div>
    </div>
</section>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
Here is how you would invoke Tigress to use your own plugin 
responders with the <tt>Checksum</tt> transform:

            </p>
        </div>
    </div>
</section>

<center>
<pre style="text-align:left;background-color:#f0f0f0;display:inline-block;padding:20px;border:1px solid black;"><code contenteditable spellcheck="false">tigress \
         --Transform=InitPlugins  --InitPluginsResponderPrefix=acme_responder    \
         --Transform=Checksum ... --ChecksumResponseKinds=plugin ... \
         ...
</code></pre>
</center>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
Here are some simple examples of responder plugins:

            </p>
        </div>
    </div>
</section>
<center>
<pre style="text-align:left;background-color:#f0f0f0;display:inline-block;padding:20px;border:1px solid black;"><code contenteditable spellcheck="false">void acme_responder_1 () {
   abort();
}
void acme_responder_2 (int argc, char** argv) {
   argv[argc-1] = '\0';
}
void acme_responder_3 () {
   for(int i=0; i<10; i++) {
      printf("Hacked %i!\n", i);
   }
   exit(-1);
}
void acme_responder_4 () {
   phone_home("We've been hacked!");
}

void acme_responder_5 () {
   memset(aes_key, 0, 16);
}
</code></pre>
</center>

<a class="anchor" id="opaque">&nbsp;</a>

<section class="mbr-section content4 TIGRESS-SECTION" id="content4-dz">
    <div class="container">
        <div class="media-container-row">
            <div class="title col-12 col-md-8">
                <h2 class="align-center pb-3 mbr-fonts-style display-2">
 Write Your Own Opaque Library!

               </h2>
            </div>
        </div>
    </div>
</section>

<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
Using plugins you can write your own opaque predicate library. Two more plugin functions are available to
facilitate this, <em>initialize</em> and <em>update</em>:

            </p>
        </div>
    </div>
</section>

<center>
<div style="mbr-text align-left pb-3 mbr-fonts-style display-7">
<table border style="background-color:#f5f5f5;overflow-x:auto;color:black;width:80%;">
    <colgroup>
       <col span="1" style="width: 20%;">
       <col span="1" style="width: 20%;">
       <col span="1" style="width: 60%;">
    </colgroup>
<tr><th>Option</th><th>Arguments</th><th>Description</th></tr>
<tr>
<td><tt>--Transform</tt></td>
<td><tt>InitPlugins</tt></td>
<td> Initialize the plugin system. </td>
</tr>
<tr>
<td><tt>--InitPluginsInvariantPrefix</tt></td>
<td><tt><em>String</em></tt></td>
<td> The prefix for the name of invariant plugin functions. Default=NONE.</td>
</tr>
<tr>
<td><tt>--InitPluginsInitializePrefix</tt></td>
<td><tt><em>String</em></tt></td>
<td> The prefix for the name of initializer plugin functions. Default=NONE.</td>
</tr>
<tr>
<td><tt>--InitPluginsUpdatePrefix</tt></td>
<td><tt><em>String</em></tt></td>
<td> The prefix for the name of update plugin functions. Default=NONE.</td>
</tr>
</table>
</div>

</center>
</br>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
Here's a simple example of a library that you would add to the beginning of your application:

            </p>
        </div>
    </div>
</section>
<center>
<pre style="text-align:left;background-color:#f0f0f0;display:inline-block;padding:20px;border:1px solid black;"><code contenteditable spellcheck="false">int alwaysEven;

void acme_initialize_even (int argc) {
   alwaysEven = (argc+1) * 2;
}

void acme_update_even_1 () {
   alwaysEven += 2;
}

void acme_update_even_2 (int f) {
   alwaysEven += f + (f % 2);
}

int acme_invariant_even_VALUE_0 (void) {
   return alwaysEven%2;
}
</code></pre>
</center>

<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
This library adds a global variable <tt>alwaysEven</tt> which, as the name implies, is alwyas even.
The body of the <tt>initialize_even</tt> function will be inserted in the function where you want 
initializations to take place, and the two update functions will be inserted by the <tt>UpdateOpaque</tt>
transformation. Here, there is no particular significance to the <tt>_number</tt> in the function names -- each
function just has to have a unique name. Here is the call to Tigress:

            </p>
        </div>
    </div>
</section>

<center>
<pre style="text-align:left;background-color:#f0f0f0;display:inline-block;padding:20px;border:1px solid black;"><code contenteditable spellcheck="false">tigress  ... \
     --Transform=InitPlugins  \
        --InitPluginsInvariantPrefix=acme_invariant    \
        --InitPluginsInitializePrefix=acme_initialize    \
        --InitPluginsUpdatePrefix=acme_update    \
     --Transform=InitOpaque   \
         --Functions=main \
          --InitOpaqueStructs=plugin    \
     --Transform=AddOpaque \
        --Functions=* \
        --AddOpaqueKinds=true \
        --AddOpaqueStructs=plugin \
     --Transform=UpdateOpaque \
        --Functions=* \
        --UpdateOpaqueCount=10 
</code></pre>
</center>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
Below is another example which uses linked list to make an opaque predicate library.
There are two invariants that hold over this list: the list is always of even length 
and the elements of the list are always odd:

            </p>
        </div>
    </div>
</section>
<center>
<pre style="text-align:left;background-color:#f0f0f0;display:inline-block;padding:20px;border:1px solid black;"><code contenteditable spellcheck="false">typedef struct intList {
   struct intListNode* first;
} *INTLIST;

typedef struct intListNode {
   int value;
   struct intListNode* next;
} *INTLISTNODE;

typedef INTLIST intList_t;
typedef INTLISTNODE intListNode_t;

intList_t list;

void acme_initialize_list (int argc) {
   list = (intList_t) malloc(sizeof(struct intList));
   list->first = NULL;
   for(int i=0; i < (argc * 2); i++) {
      intListNode_t r = (intListNode_t) malloc(sizeof(struct intListNode));
      r->value = i*2+1;
      r->next = list->first;
      list->first = r;
   }
}

void acme_update_list (int v1, int v2) {
   intListNode_t r = (intListNode_t) malloc(sizeof(struct intListNode));
   r->value = v1*2+1;
   r->next = list->first;
   list->first = r;
   r = (intListNode_t) malloc(sizeof(struct intListNode));
   r->value = v2*4+1;
   r->next = list->first;
   list->first = r;
}

int acme_invariant_length_VALUE_0 () {
   int length = 0;
   intListNode_t i = list->first;
   while (i != NULL) {
     length++;
     i = i->next;
   };
   return length % 2;
}

int acme_invariant_odd_VALUE_0 (int v) {
   int value = 3;
   intListNode_t i = list->first;
   int times = v;
   while ((i != NULL) && (times > 0)) {
     value = i->value;
     times--;
     i = i->next;
   };
   return value % 2 - 1;
}
</code></pre>
</center>


<a class="anchor" id="opaque">&nbsp;</a>

<section class="mbr-section content4 TIGRESS-SECTION" id="content4-dz">
    <div class="container">
        <div class="media-container-row">
            <div class="title col-12 col-md-8">
                <h2 class="align-center pb-3 mbr-fonts-style display-2">
 Abstract Datatype Plugins

               </h2>
            </div>
        </div>
    </div>
</section>

<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
If your program is using ADTs such as <code>HashMap</code> or <code>Set</code> you can provide
these to Tigress. The only use at the moment is with the <tt>RandomFuns</tt> transformation.

            </p>
        </div>
    </div>
</section>

<center>
<div style="mbr-text align-left pb-3 mbr-fonts-style display-7">
<table border style="background-color:#f5f5f5;overflow-x:auto;color:black;width:80%;">
    <colgroup>
       <col span="1" style="width: 20%;">
       <col span="1" style="width: 20%;">
       <col span="1" style="width: 60%;">
    </colgroup>
<tr><th>Option</th><th>Arguments</th><th>Description</th></tr>
<tr>
<td><tt>--InitPluginsCollectionPrefix</tt></td>
<td><tt><em>String, String, ...</em></tt></td>
<td> Comma-separated list of names of abstract datatypes that have been included in the program. If you specify <tt>Set</tt> as the prefix, for example, you are expected to provide types <tt>Set_TYPE<tt> (the type of the ADT itself), <tt>Set_ELEMENT</tt> (the type of the elements of the set) and <tt>Set_ITER</tt> (the type of an iterator over the set). You should also provide implementations for the following functions: <tt>Set_CREATE</tt> (create a set), <tt>Set_JOIN</tt> (merge two sets), <tt>Set_INSERT</tt> (insert an element in the set), <tt>Set_DELETE</tt> (delete an element from the set), <tt>Set_MEMBER</tt> (check if an element is in the set), <tt>Set_DESTROY</tt> (delete the set), <tt>Set_SIZE</tt> (return the number of elements in the set), <tt>Set_FIRST</tt> (return the reference to the first element of the set), <tt>Set_NEXT</tt> (return the reference to the next element of the set), <tt>Set_DONE</tt> (indicate if we are done with the interation), <tt>Set_GET (get the current element of the iteration). Default=NONE.</td>
</tr>
<tr>
<td><tt>--InitPluginsDictionaryPrefix</tt></td>
<td><tt><em>String, String, ...</em></tt></td>
<td> Comma-separated list of names of dictionary abstract datatypes that have been included in the program. Otherwise similar to <tt>--InitPluginsCollectionPrefix</tt>. Default=NONE.</td>
</tr>
</table>
</div>

</center>
</br>


<section class="header9 TIGRESS-P" id="header9-dw">
    <div class="container">
        <div class="media-container-column mbr-white">
            <p class="mbr-text align-left pb-3 mbr-fonts-style display-7">
Below is a simple example of two ADT libraries that you would add to the beginning of your application
and the corresponding Tigress command line options (you can give multiple ADTs in each option):

            </p>
        </div>
    </div>
</section>
<center>
<pre style="text-align:left;background-color:#f0f0f0;display:inline-block;padding:20px;border:1px solid black;"><code contenteditable spellcheck="false">   --Transform=InitPlugins \
       --InitPluginsCollectionPrefix=Set \
       --InitPluginsDictionaryPrefix=HashMap
</code></pre>
</center>

<center>
<pre style="text-align:left;background-color:#f0f0f0;display:inline-block;padding:20px;border:1px solid black;"><code contenteditable spellcheck="false">#include "tigress.h"
#include <stdio.h> 
#include <time.h>
#include <pthread.h>
#include <stdlib.h>
#include <time.h>
#include <sys/time.h>

// Types for Sets.
typedef ... Set_TYPE;
typedef ... Set_ELEMENT;
typedef ... Set_ITER;

// Create and destroy a set
Set_TYPE Set_CREATE(){ ... }
void Set_DESTROY(Set_TYPE *a) { ... }

// Merge sets in different ways (union, intersection, etc). 
Set_TYPE Set_JOIN_union(Set_TYPE a, Set_TYPE b) { ... } 
Set_TYPE Set_JOIN_diff(Set_TYPE a, Set_TYPE b){ ... }

// Insert and delete elements from the set.
void Set_INSERT(Set_TYPE a, Set_ELEMENT b) { ... }
void Set_DELETE(Set_TYPE a, Set_ELEMENT b) { ... }

// Query the set
int Set_MEMBER(Set_TYPE a, Set_ELEMENT b){ ... }
int Set_SIZE(Set_TYPE a){ ... }

// Iterate through the elements of the set. Here's the pattern to use:
// Set_ITER i = Set_FIRST(s);
// while not Set_DONE(s, i) {
//   Set_ELEMENT e = Set_GET(s,i);
//   Do something with e;
//   i = Set_NEXT(s,i);
// }
Set_ITER Set_FIRST(Set_TYPE a){ ... }
Set_ITER Set_NEXT(Set_TYPE a, Set_ITER n){ ... }
int Set_DONE(Set_TYPE a, Set_ITER n){ ... }
Set_ELEMENT Set_GET(Set_TYPE a, Set_ITER n){ ... }

// Similar for HashMaps (instances of a Dictionary ADT).
typedef ... HashMap_TYPE;
typedef ... HashMap_KEY;
typedef ... HashMap_ELEMENT;
typedef ... HashMap_ITER;

HashMap_TYPE HashMap_CREATE(){ ... }
void HashMap_INSERT(HashMap_TYPE a, HashMap_KEY b, HashMap_ELEMENT c) { ... }
void HashMap_DELETE(HashMap_TYPE a, HashMap_KEY b) { ... }
int HashMap_MEMBER(HashMap_TYPE a, HashMap_KEY b){ ... }
HashMap_ELEMENT HashMap_LOOKUP(HashMap_TYPE a, HashMap_KEY b){ ... }
void HashMap_DESTROY(HashMap_TYPE *a) { ... }
int HashMap_SIZE(Set_TYPE a){ ... }
HashMap_KEY HashMap_NTH(Set_TYPE a, int n){ ... }
HashMap_ITER HashMap_FIRST(HashMap_TYPE a){ ... }
HashMap_ITER HashMap_NEXT(HashMap_TYPE a, HashMap_ITER n){ ... }
int HashMap_DONE(HashMap_TYPE a, HashMap_ITER n){ ... }
HashMap_ELEMENT HashMap_GET(HashMap_TYPE a, HashMap_ITER n){ ... }
</code></pre>
</center>


<script src="assets/popper/popper.min.js"></script>
  <script src="assets/web/assets/jquery/jquery.min.js"></script>
  <script src="assets/bootstrap/js/bootstrap.min.js"></script>
  <script src="assets/tether/tether.min.js"></script>
  <script src="assets/smoothscroll/smooth-scroll.js"></script>
  <script src="assets/dropdown/js/nav-dropdown.js"></script>
  <script src="assets/dropdown/js/navbar-dropdown.js"></script>
  <script src="assets/touchswipe/jquery.touch-swipe.min.js"></script>
  <script src="assets/theme/js/script.js"></script>
  
  
  
</body>
</html>
